<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lesson Content</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism-dracula.min.css"
    />
    <style>
      .wrapper {
        font-family: inherit;
        font-size: 10px;
        line-height: 1.6 !important;
        word-wrap: break-word;
        font-weight: 400;
      }

      .wrapper p {
        font-size: 1.6em;
        margin-top: 0.5em;
        margin-bottom: 0.5em;
      }

      .wrapper h1 {
        font-weight: 600;
        font-size: 2.4em;
      }

      .wrapper h2 {
        font-weight: 600;
        font-size: 2em;
      }

      .wrapper mark {
        background-color: #ffe0e0;
        border-radius: 0.4em;
        padding: 0.2em 0.5em;
      }

      .wrapper ul li,
      .wrapper ol li {
        font-size: 1.6em;
      }

      .wrapper blockquote {
        font-style: italic;
        padding: 1.6em;
        border-radius: 1.6em;
        background-color: #def4eb;
        margin-left: 0;
        margin-right: 0;
        text-indent: 3.5em;
        position: relative;
      }

      .wrapper blockquote p {
        margin: 0;
      }

      .wrapper blockquote::before {
        position: absolute;
        top: 0.6em;
        left: -1em;
        content: '"';
        font-size: 2em;
        text-align: left;
      }

      .wrapper pre {
        padding: 1.6em !important;
        border-radius: 1.6em !important;
        font-size: 1.6em !important;
      }

      .wrapper .table-wrapper {
        width: 100%;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
      }

      .wrapper table {
        font-size: 1.6em;
        border-collapse: separate;
        border-spacing: 0;
        overflow: hidden;
        border: 1px solid #000;
        border-radius: 0.5em;
        margin: 0.5em auto;
        background-color: #fff;
        width: max-content;
        min-width: 100%;
      }

      .wrapper table th {
        font-weight: 600;
        background-color: rgba(0, 0, 0, 0.2);
        border-bottom-width: 2px;
      }

      .wrapper table th,
      .wrapper table td {
        padding: 0.5em;
        border: 1px solid #000;
      }

      .wrapper table tr th,
      .wrapper table tr td {
        border-top: none;
      }

      .wrapper table tr th:first-child,
      .wrapper table tr td:first-child {
        border-left: none;
      }

      .wrapper table tr th:last-child,
      .wrapper table tr td:last-child {
        border-right: none;
      }

      .wrapper table tr:last-child td {
        border-bottom: none;
      }
    </style>
  </head>
  <body>
    <div class="wrapper">
      <!-- content -->
    </div>
    <script defer src="https://cdn.jsdelivr.net/npm/prismjs/prism.min.js"></script>
    <script defer>
      // html-da codebloklary tapyp dilini kesgitleya we olary kolleksiya yerleshdirya yerleshdirya
      function parseCodeLanguages(htmlString) {
        const parser = new DOMParser();
        const doc = parser.parseFromString(htmlString, "text/html");

        const codeblocks = doc.querySelectorAll("pre > code[class*='language-']");
        const languages = new Set();

        if (codeblocks.length > 0) {
          codeblocks.forEach((codeblock) => {
            codeblock.classList.forEach((cls) => {
              if (cls.startsWith("language-")) {
                languages.add(
                  codeblock.getAttribute("class").replace("language-", "").toLowerCase(),
                );
              }
            });
          });
        }
        return languages;
      }

      // highlight ucin dillerin kolleksiyasy
      const LANGUAGES_MAP = {
        typescript: "typescript",
        swift: "swift",
      };

      // ulanylyan dillerin scriptini dynamic load edya
      function getHighlightingScripts(htmlString) {
        const languages = parseCodeLanguages(htmlString);
        if (languages instanceof Set && languages.size > 0) {
          languages.forEach((language) => {
            if (language in LANGUAGES_MAP) {
              const script = document.createElement("script");
              script.setAttribute("defer");
              script.setAttribute(
                "src",
                `https://cdn.jsdelivr.net/npm/prismjs/components/prism-${LANGUAGES_MAP[language]}.min.js`,
              );
              document.body.append(script);
            }
          });
        }
      }

      // root fontSize calyshmak
      function mobileFontSizeChange(fontSize) {
        if (typeof fontSize !== "number") return;
        const wrapper = document.querySelector(".wrapper");
        if (wrapper instanceof HTMLElement) {
          wrapper.style = `font-style: ${fontSize}px`;
        }
      }

      function highlight() {
        if (Prism) {
          Prims.highlightAll();
        } else {
          console.error("Prism.js yuklenmedi");
        }
      }

      function tableWrappingForIOS() {
        const tables = document.querySelectorAll("table");
        tables.forEach((table) => {
          const tableWrapper = document.createElement("div");
          tableWrapper.classList.add("table-wrapper");
          table.parentNode.insertBefore(tableWrapper, table);
          tableWrapper.appendChild(table);
        });
      }

      window.addEventListener("DOMContentLoaded", () => {
        highlight();
        tableWrappingForIOS();
      });
    </script>
  </body>
</html>
